<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Zass Store</title>
<style>

body{
    font-family:'Poppins',sans-serif;
    padding: 40px;
    /* Tambah background full-page */
    background: url('checkoutbg.jpg') no-repeat center center fixed;
    background-size: cover;
    position: relative;
}


.box{
    max-width:600px;
    margin:auto;
    background:#fff;
    padding:30px;
    border-radius:20px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}
.item{
    display:flex;
    justify-content:space-between;
    margin-bottom:12px;
}
h2,h3{
    color:#4E342E;
}
hr{
    border:none;
    border-bottom:1px solid #ccc;
    margin:15px 0;
}
.btn{
    width:100%;
    padding:14px;
    background: linear-gradient(135deg,#4E342E,#6D4C41);
    color:#fff;
    border:none;
    border-radius:12px;
    font-weight:600;
    cursor:pointer;
    margin-bottom:12px;
    transition:.3s;
}
.btn:hover{
    background: linear-gradient(135deg,#6D4C41,#4E342E);
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
}
.btn:disabled{
    background:#aaa;
    cursor:not-allowed;
}
.order-msg{
    display:none;
    text-align:center;
    color:green;
    font-weight:700;
    margin-top:15px;
}

/* POPUP */
.popup{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.5);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:10;
}
.popup.active{display:flex;}
.popup-box{
    background: rgba(255,255,255,0.15);
    backdrop-filter: blur(12px);
    padding:25px 30px;
    width:420px;
    border-radius:20px;
    color:#fff;
    position:relative;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
}
.close{
    position:absolute;
    top:12px; right:15px;
    font-size:20px;
    cursor:pointer;
}

/* Payment method horizontal layout */
.payment-option{
    display:flex;
    align-items:center;
    justify-content:space-between; /* logo kiri, radio kanan */
    background:rgba(255,255,255,0.1);
    padding:12px 16px;
    border-radius:12px;
    margin-bottom:10px;
    cursor:pointer;
    transition:.3s;
    border:2px solid transparent;
}
.payment-option:hover{
    background: rgba(255,255,255,0.2);
}
.payment-option input{
    display:none;
}
.payment-option .payment-content{
    display:flex;
    align-items:center;
    flex:1;
    justify-content:center; /* text di tengah */
}
.payment-option .payment-content img{
    width:50px;
    height:50px;
    border-radius:12px;
    margin-right:12px;
    object-fit:cover;
}
.payment-option .payment-content span{
    font-weight:600;
    color:#fff;
}
.payment-option .radio-circle{
    width:18px;
    height:18px;
    border:2px solid #fff;
    border-radius:50%;
    transition:.3s;
}
.payment-option.selected{
    border-color:#fff;
    box-shadow:0 5px 15px rgba(0,0,0,0.3);
}
.payment-option.selected .radio-circle{
    background:#fff;
}

/* Step content */
.step{display:none; flex-direction:column;}
.step.active{display:flex;}
.step input, .step select, .step textarea{
    width:100%;
    padding:12px;
    margin-bottom:12px;
    border-radius:8px;
    border:none;
    outline:none;
    box-shadow: inset 0 2px 6px rgba(0,0,0,0.1);
}
.qr{
    width:160px;
    margin:12px auto;
    display:block;
    border-radius:12px;
}
.bank-logo{
    width:60px;
    height:60px;
    margin:8px;
    border-radius:12px;
    cursor:pointer;
    transition:.3s;
    border:2px solid transparent;
}
.bank-logo.selected{
    border-color:#fff;
    box-shadow:0 4px 12px rgba(0,0,0,0.3);
    transform:scale(1.1);
}
.step h3{
    text-align:center;
    margin-bottom:18px;
    font-size:18px;
    color:#fff;
}
</style>
</head>
<body>

<div class="box">
    <h2>Checkout</h2>
    <div id="checkoutItems"></div>
    <hr>
    <h3>Total: RM <span id="checkoutTotal">0</span></h3>

    <button class="btn" id="selectPaymentBtn">Select Payment Method</button>
    <button class="btn" id="placeOrderBtn" onclick="placeOrder()" disabled>Place Order</button>

    <div class="order-msg" id="orderMsg">Order Submitted ✅</div>
</div>

<!-- POPUP -->
<div class="popup" id="paymentPopup">
<div class="popup-box">
    <span class="close" onclick="closePopup()">✕</span>

    <!-- STEP 1 -->
    <div class="step active" id="step1">
        <h3>Select Payment Method</h3>
        <label class="payment-option">
            <input type="radio" name="payment" value="Credit Card">
            <div class="payment-content">
                <img src="credit.png" alt="Credit Card">
                <span>Credit Card</span>
            </div>
            <div class="radio-circle"></div>
        </label>
        <label class="payment-option">
            <input type="radio" name="payment" value="Debit Card">
            <div class="payment-content">
                <img src="debit.png" alt="Debit Card">
                <span>Debit Card</span>
            </div>
            <div class="radio-circle"></div>
        </label>
        <label class="payment-option">
            <input type="radio" name="payment" value="Online Banking">
            <div class="payment-content">
                <img src="onlinebank.png" alt="Online Banking">
                <span>Online Banking</span>
            </div>
            <div class="radio-circle"></div>
        </label>
        <label class="payment-option">
            <input type="radio" name="payment" value="COD">
            <div class="payment-content">
                <img src="cod.png" alt="Cash on Delivery">
                <span>Cash on Delivery</span>
            </div>
            <div class="radio-circle"></div>
        </label>
        <button class="btn" onclick="nextStep()">Next</button>
    </div>

    <!-- STEP 2 -->
    <div class="step" id="step2">
        <h3 id="stepTitle">Payment Info</h3>

        <!-- Online Banking -->
        <div id="bankSection" style="display:none">
            <p style="text-align:center;">Select Bank:</p>
            <div style="display:flex;justify-content:center;flex-wrap:wrap;">
                <img src="maybank.png" class="bank-logo" onclick="selectBank(this)" alt="Maybank">
                <img src="cimb.png" class="bank-logo" onclick="selectBank(this)" alt="CIMB">
                <img src="bankislam.png" class="bank-logo" onclick="selectBank(this)" alt="Bank Islam">
                <img src="rhb.png" class="bank-logo" onclick="selectBank(this)" alt="RHB">
            </div>
            <input type="text" id="accountInput" placeholder="Enter your Account Number" style="display:none;">
            <img id="bankQR" src="qr.png" class="qr" style="display:none;">
        </div>

        <!-- Card -->
        <div id="cardSection" style="display:none">
            <input type="text" id="cardNo" placeholder="Card Number">
        </div>

        <!-- COD -->
        <div id="codSection" style="display:none">
            <input type="text" id="codAddress" placeholder="Delivery Address">
            <input type="text" id="codPhone" placeholder="Phone Number">
        </div>

        <button class="btn" onclick="confirmPayment()">Confirm</button>
    </div>
</div>
</div>

<script>
// Load cart
let cart=JSON.parse(localStorage.getItem("cart"))||[];
let total=0;
cart.forEach(i=>{
    total+=i.price*i.qty;
    checkoutItems.innerHTML+=`
    <div class="item">
        <span>${i.name} x ${i.qty}</span>
        <span>RM${(i.price*i.qty).toFixed(2)}</span>
    </div>`; 
});
checkoutTotal.innerText=total.toFixed(2);

// Popup
const popup=document.getElementById("paymentPopup");
const selectPaymentBtn=document.getElementById("selectPaymentBtn");
const placeOrderBtn=document.getElementById("placeOrderBtn");
const step1=document.getElementById("step1");
const step2=document.getElementById("step2");
const bankSection=document.getElementById("bankSection");
const cardSection=document.getElementById("cardSection");
const codSection=document.getElementById("codSection");
const stepTitle=document.getElementById("stepTitle");
const bankQR=document.getElementById("bankQR");
const accountInput=document.getElementById("accountInput");

// Payment highlight
document.querySelectorAll('.payment-option').forEach(el=>{
    el.addEventListener('click', ()=>{
        document.querySelectorAll('.payment-option').forEach(e=>e.classList.remove('selected'));
        el.classList.add('selected');
        el.querySelector('input').checked=true;
    });
});

// Open popup
selectPaymentBtn.addEventListener("click", ()=>{
    popup.classList.add("active");
    step1.classList.add("active");
    step2.classList.remove("active");
    bankSection.style.display="none";
    cardSection.style.display="none";
    codSection.style.display="none";
    bankQR.style.display="none";
    accountInput.style.display="none";
});

// Close popup
function closePopup(){popup.classList.remove("active")}

// Next step
function nextStep(){
    const selected=document.querySelector('input[name="payment"]:checked');
    if(!selected) return alert("Please select a payment method");

    step1.classList.remove("active");
    step2.classList.add("active");

    bankSection.style.display="none";
    cardSection.style.display="none";
    codSection.style.display="none";
    bankQR.style.display="none";
    accountInput.style.display="none";

    if(selected.value==="Online Banking"){
        bankSection.style.display="block";
        stepTitle.innerText="Online Banking";
    } else if(selected.value==="COD"){
        codSection.style.display="flex";
        stepTitle.innerText="Cash on Delivery";
    } else {
        cardSection.style.display="block";
        stepTitle.innerText=selected.value;
    }
}

// Bank select
function selectBank(el){
    document.querySelectorAll('.bank-logo').forEach(e=>e.classList.remove('selected'));
    el.classList.add('selected');
    accountInput.style.display="block";
    bankQR.style.display="block";
}

// Confirm payment
function confirmPayment(){
    const selected=document.querySelector('input[name="payment"]:checked').value;

    if(selected==="Online Banking" && accountInput.value==="") return alert("Please enter your account number");
    if(selected==="COD" && (codAddress.value==="" || codPhone.value==="")) return alert("Please fill address and phone");
    if(selected!=="COD" && selected!=="Online Banking" && cardNo.value==="") return alert("Please enter card number");

    closePopup();
    selectPaymentBtn.innerText="Payment: "+selected;
    placeOrderBtn.disabled=false;
}

// Place order
function placeOrder(){
    const selected=document.querySelector('input[name="payment"]:checked');
    if(!selected) return alert("Select payment");

    orderMsg.style.display="block";
    placeOrderBtn.disabled=true;
    selectPaymentBtn.disabled=true;

    localStorage.removeItem("cart");
    localStorage.setItem("cartCount",0);
}
</script>

</body>
</html>
